state machine

TODO
-make it not recursive
-use something closer to re2
